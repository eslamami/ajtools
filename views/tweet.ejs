<html>
<script src='./assets/js/ar_format.js' type='text/javascript'></script>
<script src='./assets/js/drawtweet.js' type='text/javascript'></script>

<script src="http://hongru.github.io/proj/canvas2image/canvas2image.js"></script>
<link href='./assets/twt_styles.css' rel='stylesheet' type='text/css' />
<head>
    <meta charset="utf-8" />
    <title>Tweet render</title>
    <link rel="icon" href="./assets/images/Yelltwitter.png">
</head>

<body>
  <div class="row">
    <div class="column left" >
      <canvas id="myCanvas" width="1200" height="850" dir="rtl" >

      Your browser does not support the canvas element.
      </canvas>

    </div>
    <div class="column right" >
    <textarea id="mytext" name="tweet" dir="rtl" oninput="Draw(tw)"></textarea>
    <a id="download">Download as image</a>

    </div>
  </div>


  <p id="demoout" direction="rtl"></p>

  <script>


  var tw  =<%- JSON.stringify(twt) %>;
  var orgi_tw = <%- JSON.stringify(twt) %> ;
var tweet = arformat(tw);
document.getElementById("mytext").innerHTML = (tweet.full_text)   ;

//Ã§document.getElementById("demoout").innerHTML = JSON.stringify(orgi_tw.created_at)  ;
Draw(tw);

function downloadCanvas(link, canvasId, filename) {
  var canv = document.getElementById(canvasId)

    link.href = canv.toDataURL("image/png");
    link.download = filename;
}

/**
 * The event handler for the link's onclick event. We give THIS as a
 * parameter (=the link element), ID of the canvas and a filename.
*/
document.getElementById('download').addEventListener('click', function() {
    downloadCanvas(this, 'myCanvas', 'tweet.png');
}, false);

  </script>



</body>

</html>
